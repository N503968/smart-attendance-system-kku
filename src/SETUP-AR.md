# ุฏููู ุงูุฅุนุฏุงุฏ ุงูุณุฑูุน - ูุธุงู ุงูุญุถูุฑ ุงูุฐูู

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุฐูู ูุชูุงูู ูุฅุฏุงุฑุฉ ุงูุญุถูุฑ ูุงูุฌุฏุงูู ุงูุฏุฑุงุณูุฉ ูุฌุงูุนุฉ ุงูููู ุฎุงูุฏุ ูุน ุฏุนู:
- โ ุงููุตุงุฏูุฉ ุงูุจูููุชุฑูุฉ (ุจุตูุฉ ุงูุฅุตุจุน)
- โ ุงูุชุญูู ูู ุงูุฑูู ุงูุฌุงูุนู
- โ ุงูุชุญุฏูุซุงุช ุงูููุฑูุฉ
- โ ุฏุนู ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- โ ุงููุถุน ุงููููู ูุงูููุงุฑู

## ๐ ุฎุทูุงุช ุงูุชุดุบูู ุงูุณุฑูุน

### 1. ุชุซุจูุช ุงููุชุทูุจุงุช

```bash
npm install
```

### 2. ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช Supabase

ุงููุธุงู ูุฑุจูุท ูุณุจูุงู ุจุญุณุงุจ Supabase:
- **ุงูุฑุงุจุท:** https://bscxhshnubkhngodruuj.supabase.co
- **ุงูุจุฑูุฏ:** mnafisah668@gmail.com

#### ุฎุทูุงุช ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช:

1. **ุงูุชุญ ููุญุฉ ุชุญูู Supabase:**
   - ุงุฐูุจ ุฅูู: https://supabase.com/dashboard
   - ุณุฌู ุงูุฏุฎูู ุจุงูุจุฑูุฏ: mnafisah668@gmail.com

2. **ุงุฎุชุฑ ุงููุดุฑูุน:**
   - Project: bscxhshnubkhngodruuj

3. **ุงูุชุญ SQL Editor:**
   - ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ: SQL Editor
   - ุงููุฑ ุนูู "New query"

4. **ููุฐ ุงูุณูุฑูุจุช:**
   - ุงูุชุญ ููู `database/schema.sql`
   - ุงูุณุฎ ูู ุงููุญุชูู
   - ุงูุตูู ูู SQL Editor
   - ุงุถุบุท Run

ูุฐุง ุณููุดุฆ:
- โ ุฌููุน ุงูุฌุฏุงูู ุงููุทููุจุฉ
- โ ุณูุงุณุงุช ุงูุฃูุงู (RLS)
- โ ุงูููุงุฑุณ
- โ ุจูุงูุงุช ุชุฌุฑูุจูุฉ ููุทูุงุจ

### 3. ุชุดุบูู ุงูุชุทุจูู

```bash
npm run dev
```

ุงูุชุทุจูู ุณูุนูู ุนูู: http://localhost:5173

## ๐ ุงุฎุชุจุงุฑ ุงููุธุงู

### ุฃุฑูุงู ุฌุงูุนูุฉ ุฌุงูุฒุฉ ููุงุฎุชุจุงุฑ

ุชู ุฅุถุงูุฉ ูุฐู ุงูุฃุฑูุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- `442100001` - ุฎุงูุฏ ุฃุญูุฏ ุงูุณุงูู
- `442100002` - ุณุงุฑุฉ ูุญูุฏ ุงููุญุทุงูู
- `442100003` - ุนุจุฏุงููู ุนูู ุงูุดูุฑู

### ุชุณุฌูู ุญุณุงุจ ุทุงูุจ ุฌุฏูุฏ:

1. ุงููุฑ ุนูู "ุงูุชุณุฌูู" (Register)
2. ุฃุฏุฎู ุงูุจูุงูุงุช:
   - **ุงูุงุณู ุงููุงูู:** ุฃู ุงุณู
   - **ุงูุจุฑูุฏ:** ูุซุงู: test@kku.edu.sa
   - **ุงูุฑูู ุงูุฌุงูุนู:** 442100001
   - **ูููุฉ ุงููุฑูุฑ:** 6 ุฃุญุฑู ุนูู ุงูุฃูู
3. ุงููุฑ "ุชุณุฌูู"
4. ุณุฌู ุงูุฏุฎูู ุจููุณ ุงูุจูุงูุงุช

### ุชุณุฌูู ุญุณุงุจ ูุฏุฑุณ:

1. ุณุฌู ููุณุชุฎุฏู ุนุงุฏู (ุจุฏูู ุฑูู ุฌุงูุนู)
2. ุงุฐูุจ ุฅูู Supabase Dashboard
3. ุงูุชุญ Table Editor โ profiles
4. ุนุฏู ุงูุฏูุฑ (role) ุฅูู `instructor`

### ุชุณุฌูู ุญุณุงุจ ูุฏูุฑ:

ููุณ ุฎุทูุงุช ุงููุฏุฑุณุ ููู ุนุฏู role ุฅูู `admin`

## ๐ง ุฅุนุฏุงุฏ WebAuthn (ุงุฎุชูุงุฑู)

ูุชูุนูู ุงูุจุตูุฉ ุงูุจูููุชุฑูุฉุ ุชุญุชุงุฌ ููุดุฑ Edge Functions:

### ุชุซุจูุช Supabase CLI:

```bash
npm install -g supabase
```

### ุชุณุฌูู ุงูุฏุฎูู:

```bash
supabase login
```

### ุฑุจุท ุงููุดุฑูุน:

```bash
supabase link --project-ref bscxhshnubkhngodruuj
```

### ูุดุฑ ุงูุฏูุงู:

```bash
supabase functions deploy webauthn-register-challenge
supabase functions deploy webauthn-register-verify
supabase functions deploy webauthn-assert-challenge
supabase functions deploy webauthn-assert-verify
```

ุฑุงุฌุน ููู `database/edge-functions-guide.md` ููุชูุงุตูู ุงููุงููุฉ.

## ๐ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฌุฏุงูู ุงูุฑุฆูุณูุฉ:

1. **profiles** - ูููุงุช ุงููุณุชุฎุฏููู
   - id, full_name, email, role, student_number

2. **allowed_students** - ูุงุฆูุฉ ุงูุทูุงุจ ุงููุณููุญ ููู
   - student_number, full_name, active

3. **courses** - ุงูููุงุฏ ุงูุฏุฑุงุณูุฉ
   - id, code, name, instructor_id

4. **sections** - ุงูุดุนุจ
   - id, course_id, name

5. **schedules** - ุงูุฌุฏุงูู ุงูุฃุณุจูุนูุฉ
   - id, section_id, day_of_week, start_time, end_time, location

6. **sessions** - ุฌูุณุงุช ุงูุญุถูุฑ
   - id, section_id, starts_at, ends_at, code

7. **attendance** - ุณุฌูุงุช ุงูุญุถูุฑ
   - id, session_id, student_id, status, method

8. **webauthn_credentials** - ุจูุงูุงุช ุงูุจุตูุฉ
   - id, user_id, credential_id, public_key

## ๐จ ุงูุฃููุงู ุงููุณุชุฎุฏูุฉ

ุงููุธุงู ูุณุชุฎุฏู ุฃููุงู ุฌุงูุนุฉ ุงูููู ุฎุงูุฏ:
- **ุงูููู ุงูุฃุณุงุณู:** `#0B3D2E` (ุงูุฃุฎุถุฑ ุงูุฌุงูุนู)
- **ุงูููู ุงูุซุงููู:** `#1ABC9C` (ุงูุชุฑููุงุฒ)
- **ุงูุฎูููุฉ:** `#F5F7F7`
- **ุงููุฌุงุญ:** `#27AE60`
- **ุงูุฎุทุฃ:** `#E74C3C`

## ๐ ุงููุบุงุช

### ุชุจุฏูู ุงููุบุฉ:
- ุงููุฑ ุนูู ุฃููููุฉ ุงููุฑุฉ ุงูุฃุฑุถูุฉ ๐ ูู ุดุฑูุท ุงูุชููู
- ูุชู ุญูุธ ุงูุงุฎุชูุงุฑ ุชููุงุฆูุงู

### ุฅุถุงูุฉ ุชุฑุฌูุงุช ุฌุฏูุฏุฉ:
ุนุฏู ููู `lib/i18n.ts`:

```typescript
export const translations = {
  ar: {
    newKey: 'ุงููุต ุจุงูุนุฑุจูุฉ'
  },
  en: {
    newKey: 'Text in English'
  }
};
```

## ๐ ุงูุฃูุงู

### ุณูุงุณุงุช RLS ููุนูุฉ ุนูู ุฌููุน ุงูุฌุฏุงูู:

- **ุงูุทูุงุจ:** ูุฑูู ููุท ุจูุงูุงุชูู ุงูุฎุงุตุฉ
- **ุงููุฏุฑุณูู:** ูุฑูู ุทูุงุจ ููุงุฏูู ููุท
- **ุงููุฏุฑุงุก:** ูุฑูู ุฌููุน ุงูุจูุงูุงุช

### ุงูุชุญูู ูู ุงูุฑูู ุงูุฌุงูุนู:
- ููุท ุงูุฃุฑูุงู ุงูููุฌูุฏุฉ ูู `allowed_students` ูููููุง ุงูุชุณุฌูู
- ูููู ูููุฏูุฑ ุฅุถุงูุฉ ุฃุฑูุงู ุฌุฏูุฏุฉ ุนุจุฑ SQL:

```sql
INSERT INTO allowed_students (student_number, full_name, active)
VALUES ('442100999', 'ุงุณู ุงูุทุงูุจ', true);
```

## ๐ฑ ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### ูููุฏูุฑ (Admin):
- โ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
- โ ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ุงูููุงุฏ
- โ ุนุฑุถ ุฌููุน ุงูุชูุงุฑูุฑ
- โ ุฅุญุตุงุฆูุงุช ุดุงููุฉ

### ูููุฏุฑุณ (Instructor):
- โ ุฅูุดุงุก ุฌูุณุงุช ุญุถูุฑ
- โ ุชูููุฏ ุฃููุงุฏ ูุฑูุฏุฉ
- โ ุนุฑุถ ุญุถูุฑ ุงูุทูุงุจ
- โ ุชูุงุฑูุฑ ุชูุตูููุฉ
- โ ุฅุฏุงุฑุฉ ุงูุฌุฏุงูู

### ููุทุงูุจ (Student):
- โ ุชุณุฌูู ุงูุญุถูุฑ ุจุงูููุฏ
- โ ุงููุตุงุฏูุฉ ุงูุจูููุชุฑูุฉ
- โ ุนุฑุถ ุณุฌู ุงูุญุถูุฑ
- โ ุนุฑุถ ุงูุฌุฏูู ุงูุฏุฑุงุณู
- โ ุฅุญุตุงุฆูุงุช ุดุฎุตูุฉ

## ๐ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### ูุง ุฃุณุชุทูุน ุงูุชุณุฌูู ูุทุงูุจ:
- โ ุชุฃูุฏ ุฃู ุงูุฑูู ุงูุฌุงูุนู ููุฌูุฏ ูู `allowed_students`
- โ ุชุฃูุฏ ุฃู ุงูุญูู `active = true`
- โ ุชุญูู ูู ุตุญุฉ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

### ุงูุจุตูุฉ ุงูุจูููุชุฑูุฉ ูุง ุชุนูู:
- โ ุชุฃูุฏ ูู ุงุณุชุฎุฏุงู HTTPS ุฃู localhost
- โ ุชุญูู ูู ุชูุงูู ุงููุชุตูุญ (Chrome, Edge, Safari)
- โ ุชุฃูุฏ ูู ูุดุฑ Edge Functions
- โ ุงูุญุต console ููุฃุฎุทุงุก

### ูุง ุฃุณุชุทูุน ุงููุตูู ููุจูุงูุงุช:
- โ ุชุญูู ูู ุฏูุฑู ูู ุฌุฏูู `profiles`
- โ ุชุฃูุฏ ูู ุณูุงุณุงุช RLS
- โ ุชุฃูุฏ ูู ุชุณุฌูู ุฏุฎููู

### ุชุนุฏูู ุฏูุฑ ุงููุณุชุฎุฏู:
1. ุงูุชุญ Supabase Dashboard
2. ุงุฐูุจ ุฅูู Table Editor โ profiles
3. ุงุจุญุซ ุนู ุงููุณุชุฎุฏู ุจุงูุจุฑูุฏ
4. ุนุฏู ุญูู `role` ุฅูู: admin / instructor / student

## ๐ฆ ุงููุดุฑ

### ูุดุฑ ุงููุงุฌูุฉ (Frontend):

**ุนูู Vercel:**
```bash
npm run build
vercel deploy
```

**ุนูู Netlify:**
```bash
npm run build
netlify deploy --prod
```

### ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- โ Supabase ูุณุชุถุงู ุจุงููุนู
- โ ูุง ุญุงุฌุฉ ูุฅุนุฏุงุฏุงุช ุฅุถุงููุฉ

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ:
1. ุฑุงุฌุน ูุณู "ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ"
2. ุงูุญุต ุณุฌูุงุช Supabase Logs
3. ุงูุญุต console ุงููุชุตูุญ
4. ุชุญูู ูู ุณูุงุณุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ๐ ููุงุฑุฏ ุฅุถุงููุฉ

- **Supabase Docs:** https://supabase.com/docs
- **WebAuthn Guide:** https://webauthn.guide
- **React Docs:** https://react.dev
- **Tailwind CSS:** https://tailwindcss.com

---

**ุชู ุงูุชุทููุฑ ุจูู โค๏ธ ูุฌุงูุนุฉ ุงูููู ุฎุงูุฏ**

๐ ูุธุงู ุงูุญุถูุฑ ุงูุฐูู - King Khalid University
