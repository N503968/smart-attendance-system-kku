# ๐ ุณุฌู ุงูุชุบููุฑุงุช (Changelog)

## [2.0.0] - ููููุจุฑ 2025

### โจ ููุฒุงุช ุฌุฏูุฏุฉ ุฑุฆูุณูุฉ

#### ๐ ุชุญุฏูุซ ุงูุฃุฏูุงุฑ ุงููุงูู
- **ุฅุถุงูุฉ:** ุฃุฏูุงุฑ ุฌุฏูุฏุฉ ูุงุถุญุฉ ููุญุฏุฏุฉ
  - `student` (ุทุงูุจ) - ุจุฏูุงู ูู ุงููุฏูู
  - `teacher` (ูุฏุฑุณ) - ุจุฏูุงู ูู `instructor`
  - `supervisor` (ูุดุฑู) - ุจุฏูุงู ูู `admin`
- **ุฅุถุงูุฉ:** DEFAULT value ููุฏูุฑ = `'student'` ูููุน ุญุณุงุจุงุช "ุจุฏูู ุฏูุฑ"
- **ุฅุถุงูุฉ:** ุชุญุฏูุซ ุฌููุน RLS Policies ููุฃุฏูุงุฑ ุงูุฌุฏูุฏุฉ

#### ๐ ูุธุงู ุงููุตุงุฏูุฉ ุงููุญุณูู
- **ุฅุถุงูุฉ:** Trigger ุชููุงุฆู `handle_new_user()` ูุฅูุดุงุก Profile ุนูุฏ ุงูุชุณุฌูู
- **ุฅุตูุงุญ:** ูุดููุฉ "duplicate key violation" ุจุงุณุชุฎุฏุงู `ON CONFLICT DO UPDATE`
- **ุฅุถุงูุฉ:** ุงูุชุญูู ุงูุตุงุฑู ูู ุงูุจุฑูุฏ ุงูุฌุงูุนู `@kku.edu.sa`
- **ุชุญุณูู:** ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก ูุน ุฑุณุงุฆู ูุงุถุญุฉ

#### ๐ก๏ธ ุชุญุณููุงุช ุงูุฃูุงู
- **ุฅุถุงูุฉ:** Row Level Security ูุญุฏุซุฉ ูุฌููุน ุงูุฌุฏุงูู
- **ุชุญุณูู:** ุณูุงุณุงุช ูุตูู ูุญููุฉ ููู ุฏูุฑ
- **ุฅุถุงูุฉ:** ููุน ุงููุตูู ููุตูุญุงุช ุบูุฑ ุงููุตุฑุญ ุจูุง
- **ุชุญุณูู:** ุฑุณุงุฆู Access Denied ูุงุถุญุฉ ููุชุฑุฌูุฉ

#### ๐จ ุชุญุณููุงุช ุงููุงุฌูุฉ
- **ุชุญุฏูุซ:** ุชุณููุงุช ุงูุฃุฏูุงุฑ ูู Navbar
- **ุฅุถุงูุฉ:** ุฏุนู legacy ููุฃุฏูุงุฑ ุงููุฏููุฉ (backward compatibility)
- **ุชุญุณูู:** ุฑุณุงุฆู ุงูุฎุทุฃ ูุงููุฌุงุญ ุฃูุซุฑ ูุถูุญุงู
- **ุฅุถุงูุฉ:** ุชูุฌูู ุชููุงุฆู ูููุญุงุช ุงูุชุญูู ุงูููุงุณุจุฉ

#### ๐ ุงูุชูุซูู
- **ุฅุถุงูุฉ:** `๐-ุฏููู-ุงูุงุณุชุฎุฏุงู-ุงูููุงุฆู.md` - ุฏููู ุดุงูู ุจุงูุนุฑุจูุฉ
- **ุฅุถุงูุฉ:** `๐-SETUP-COMPLETE.md` - ุฎุทูุงุช ุงูุฅุนุฏุงุฏ ุงูููุงุฆูุฉ
- **ุฅุถุงูุฉ:** `โก-QUICK-START.md` - ุจุฏุก ุณุฑูุน ูู 3 ุฏูุงุฆู
- **ุฅุถุงูุฉ:** `migration-update-roles.sql` - ุณูุฑูุจุช ุชุญุฏูุซ ุงูุฃุฏูุงุฑ
- **ุชุญุฏูุซ:** `README.md` - ูุซุงุฆู ูุงููุฉ ููุญุฏุซุฉ

### ๐ง ุฅุตูุงุญุงุช

#### Database
- **ุฅุตูุงุญ:** ูุดููุฉ duplicate key ุนูุฏ ุฅูุดุงุก profile
- **ุฅุตูุงุญ:** role NULL ูุชุณุจุจ ุจุฃุฎุทุงุก
- **ุฅุตูุงุญ:** ุนุฏู ุฅูุดุงุก profile ุชููุงุฆูุงู ุจุนุฏ ุงูุชุณุฌูู
- **ุชุญุฏูุซ:** Constraints ููุฌุฏูู profiles

#### Authentication
- **ุฅุตูุงุญ:** ุฎุทุฃ "Email not confirmed" ูุน ุชุนูููุงุช ูุงุถุญุฉ
- **ุฅุตูุงุญ:** ุนุฏู ุญูุธ ุงูุฏูุฑ ุนูุฏ ุงูุชุณุฌูู
- **ุชุญุณูู:** ูุนุงูุฌุฉ PGRST205 error ูุน ุฅุฑุดุงุฏุงุช

#### UI/UX
- **ุฅุตูุงุญ:** ุนุฏู ุธููุฑ ุงูุฏูุฑ ุงูุตุญูุญ ูู Navbar
- **ุฅุตูุงุญ:** ุฑุณุงุฆู ุฎุทุฃ ุบูุฑ ูููููุฉ
- **ุชุญุณูู:** ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู ุนูุฏ ุงูุฃุฎุทุงุก

### ๐๏ธ ุชุญุฏูุซุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### Schema Changes
```sql
-- ุชุญุฏูุซ CHECK constraint ููุฃุฏูุงุฑ
role TEXT NOT NULL DEFAULT 'student' CHECK (role IN ('student', 'teacher', 'supervisor'))

-- ุฅุถุงูุฉ Trigger
CREATE TRIGGER on_auth_user_created
  AFTER INSERT ON auth.users
  FOR EACH ROW EXECUTE FUNCTION public.handle_new_user();
```

#### RLS Policies
- ุชุญุฏูุซ ุฌููุน ุงูุณูุงุณุงุช ูุงุณุชุฎุฏุงู ุงูุฃุฏูุงุฑ ุงูุฌุฏูุฏุฉ
- ุฅุถุงูุฉ DROP POLICY IF EXISTS ูุชุฌูุจ ุงูุฃุฎุทุงุก ุนูุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู
- ุชุญุณูู ุงูุฃุฏุงุก ุจุฅุถุงูุฉ indexes

### โ๏ธ Breaking Changes

#### ูููุทูุฑูู
- **ุงูุฃุฏูุงุฑ ุงููุฏููุฉ ูู ุชุนุฏ ูุฏุนููุฉ ุฑุณููุงู:**
  - `instructor` โ ุงุณุชุฎุฏู `teacher`
  - `admin` โ ุงุณุชุฎุฏู `supervisor`
- **ูุฌุจ ุชุดุบูู:** `migration-update-roles.sql` ููุญุณุงุจุงุช ุงูููุฌูุฏุฉ

#### ูููุณุชุฎุฏููู
- ูุง ููุฌุฏ ุชุฃุซูุฑ ุนูู ุงููุณุชุฎุฏููู ุงูุญุงูููู
- ุงููุธุงู ูุฏุนู ุงูุฃุฏูุงุฑ ุงููุฏููุฉ ุชููุงุฆูุงู (legacy support)

### ๐ฆ ุงูุชุจุนูุงุช (Dependencies)

#### ูุญุฏุซุฉ
- `@supabase/supabase-js`: ^2.39.7
- `tailwindcss`: ^4.0.0

#### ุจุฏูู ุชุบููุฑ
- ุฌููุน ุงูุชุจุนูุงุช ุงูุฃุฎุฑู ูุณุชูุฑุฉ

### ๐งช ุงูุงุฎุชุจุงุฑุงุช

#### ุชู ุงุฎุชุจุงุฑู
- โ ุชุณุฌูู ุญุณุงุจ ุฌุฏูุฏ ูุฌููุน ุงูุฃุฏูุงุฑ
- โ ุชุณุฌูู ุงูุฏุฎูู
- โ ุงูุชูุฌูู ุงูุชููุงุฆู ูููุญุงุช ุงูุชุญูู
- โ ุญูุงูุฉ ุงูุตูุญุงุช
- โ ุงูุชุญูู ูู ุงูุจุฑูุฏ ุงูุฌุงูุนู
- โ ุฅูุดุงุก Profile ุชููุงุฆู
- โ ุชุจุฏูู ุงููุบุฉ
- โ ุงููุถุน ุงููููู/ุงูููุงุฑู

#### Known Issues
- ูุง ุชูุฌุฏ ูุดุงูู ูุนุฑููุฉ

---

## [1.0.0] - ุฃูุชูุจุฑ 2025

### ๐ ุงูุฅุตุฏุงุฑ ุงูุฃููู

#### ููุฒุงุช ุฃุณุงุณูุฉ
- ูุธุงู ูุตุงุฏูุฉ ูุงูู
- ุซูุงุซุฉ ุฃุฏูุงุฑ: admin, instructor, student
- WebAuthn ููุจุตูุฉ ุงูุจูููุชุฑูุฉ
- QR Codes ููุญุถูุฑ
- ููุญุงุช ุชุญูู ูููุตูุฉ
- ุชูุงุฑูุฑ ูุฅุญุตุงุฆูุงุช
- ุฏุนู ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- ูุถุน ูููู ูููุงุฑู

#### ุงูุชูููุงุช
- React + TypeScript
- Tailwind CSS
- Supabase (Auth + Database)
- shadcn/ui components

---

## Migration Guide

### ูู 1.0.0 ุฅูู 2.0.0

#### ูููุทูุฑูู:

1. **ุชุญุฏูุซ Schema:**
```bash
# ุงูุชุญ Supabase SQL Editor
# ุดุบูู ูุญุชูู: /supabase-schema.sql
```

2. **ุชุญุฏูุซ ุงูุฃุฏูุงุฑ ุงููุฏููุฉ (ุฅุฐุง ูุฌุฏุช):**
```bash
# ุดุบูู: /migration-update-roles.sql
```

3. **ุชุญุฏูุซ ุงูููุฏ (ุฅุฐุง ููุช ุชุณุชุฎุฏู API ูุจุงุดุฑุฉ):**
```typescript
// ุงููุฏูู
if (user.role === 'instructor') { }
if (user.role === 'admin') { }

// ุงูุฌุฏูุฏ
if (user.role === 'teacher') { }
if (user.role === 'supervisor') { }
```

#### ูููุณุชุฎุฏููู:
- ูุง ุญุงุฌุฉ ูุฃู ุฅุฌุฑุงุก
- ุงูุญุณุงุจุงุช ุงููุฏููุฉ ุชุนูู ุชููุงุฆูุงู

---

## Support

ูุฃู ุงุณุชูุณุงุฑุงุช ุฃู ูุดุงูู:
1. ุฑุงุฌุน: `๐-ุฏููู-ุงูุงุณุชุฎุฏุงู-ุงูููุงุฆู.md`
2. ุฑุงุฌุน: `๐-SETUP-COMPLETE.md`
3. ุชุญูู ูู Console ูู ุงููุชุตูุญ (F12)

---

**ุขุฎุฑ ุชุญุฏูุซ:** ููููุจุฑ 10, 2025  
**ุงููุทููุฑุงุช:** ูุฑูู ุทุงูุจุงุช ุฌุงูุนุฉ ุงูููู ุฎุงูุฏ
